// Generated by CoffeeScript 1.9.3
(function() {
  var submit;

  window.serialize = function() {
    var data;
    data = {
      'name': $('[name="test-name"]').val(),
      'creator': $('[name="test-creator').val(),
      'test': $('[name="test-test"]').val(),
      'versions': []
    };
    $('.version-form').each(function(i, e) {
      e = $(e);
      return data.versions.push({
        'name': e.children('[name="test-version-name"]').val(),
        'code': e.children('[name="test-version"]').val()
      });
    });
    return data;
  };

  submit = function() {
    return $.post('http://127.0.0.1:3000/api/1/add', serialize(), function(data) {
      return window.location = data;
    });
  };

  $(document).ready(function() {
    $('#button-test-add').on('click', function(e) {
      var clone;
      clone = $('.version-form:last').clone();
      clone.children().val('');
      return $('.version-form:last').after('<hr/>', clone);
    });
    $('#button-test-submit').on('click', function() {
      return submit();
    });
    return $('#test-form').on('submit', function(e) {
      e.preventDefault();
      console.log('?!');
      return submit();
    });
  });

}).call(this);
